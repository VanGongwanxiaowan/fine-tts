https://docs.coqui.ai/en/latest/marytts.html

# Mary-TTS API Support for Coqui-TTS
Mary-TTS API对Coqui-TTS的支持

## What is Mary-TTS? 什么是Mary-TTS？

Mary (Modular Architecture for Research in sYnthesis) Text-to-Speech is an open-source (GNU LGPL license), multilingual Text-to-Speech Synthesis platform written in Java. It was originally developed as a collaborative project of DFKI’s Language Technology Lab and the Institute of Phonetics at Saarland University, Germany. It is now maintained by the Multimodal Speech Processing Group in the Cluster of Excellence MMCI and DFKI. MaryTTS has been around for a very! long time. Version 3.0 even dates back to 2006, long before Deep Learning was a broadly known term and the last official release was version 5.2 in 2016. You can check out this OpenVoice-Tech page to learn more: https://openvoice-tech.net/index.php/MaryTTS

Mary（用于合成研究的模块化架构）文本转语音是一个开源（GNU LGPL许可证）的多语言文本转语音合成平台，采用Java编写。它最初是由德国萨尔兰大学德国人工智能研究中心（DFKI）的语言技术实验室与语音学研究所合作开发的项目。现在由卓越集群MMCI的多模态语音处理小组和DFKI负责维护。MaryTTS已经存在很长时间了。3.0版本甚至可以追溯到2006年，远在深度学习成为一个广为人知的术语之前，而最后一个官方版本是2016年的5.2版本。你可以查看这个OpenVoice-Tech页面了解更多信息：https://openvoice-tech.net/index.php/MaryTTS

## Why Mary-TTS compatibility is relevant
为什么Mary-TTS兼容性很重要

Due to its open-source nature, relatively high quality voices and fast synthetization speed Mary-TTS was a popular choice in the past and many tools implemented API support over the years like screen-readers (NVDA + SpeechHub), smart-home HUBs (openHAB, Home Assistant) or voice assistants (Rhasspy, Mycroft, SEPIA). A compatibility layer for Coqui-TTS will ensure that these tools can use Coqui as a drop-in replacement and get even better voices right away.

由于其开源特性、质量相对较高的语音以及快速的合成速度，Mary-TTS在过去是一个受欢迎的选择，多年来许多工具都实现了对其API的支持，例如屏幕阅读器（NVDA + SpeechHub）、智能家居集线器（openHAB、Home Assistant）或语音助手（Rhasspy、Mycroft、SEPIA）。Coqui-TTS的兼容层将确保这些工具能够将Coqui作为即插即用的替代品，立即获得更好的语音效果。

## API and code examples API和代码示例

Like Coqui-TTS, Mary-TTS can run as HTTP server to allow access to the API via HTTP GET and POST calls. The best documentations of this API are probably the web-page, available via your self-hosted Mary-TTS server and the Java docs page. Mary-TTS offers a larger number of endpoints to load styles, audio effects, examples etc., but compatible tools often only require 3 of them to work:

与Coqui-TTS类似，Mary-TTS可以作为HTTP服务器运行，允许通过HTTP的GET和POST调用访问API。关于该API，最佳文档或许是可通过您自行托管的Mary-TTS服务器获取的网页以及Java文档页面。Mary-TTS提供了大量端点用于加载样式、音频效果、示例等，但兼容工具通常只需要其中3个就能运行：

- /locales (GET) - Returns a list of supported locales in the format [locale]\n..., for example “en_US” or “de_DE” or simply “en” etc.
- /locales（GET）- 返回受支持的语言环境列表，格式为[locale]\n...，例如“en_US”“de_DE”或简称为“en”等。


- /voices (GET) - Returns a list of supported voices in the format [name] [locale] [gender]\n..., ‘name’ can be anything without spaces(!) and ‘gender’ is traditionally f or m
- /voices（GET）- 以[name] [locale] [gender]\n...的格式返回支持的语音列表，“名称”可以是任何不含空格（！）的内容，“性别”传统上为f或m


- /process?INPUT_TEXT=[my text]&INPUT_TYPE=TEXT&LOCALE=[locale]&VOICE=[name]&OUTPUT_TYPE=AUDIO&AUDIO=WAVE_FILE (GET/POST) - Processes the input text and returns a wav file. INPUT_TYPE, OUTPUT_TYPE and AUDIO support additional values, but are usually static in compatible tools.
- /process?INPUT_TEXT=[my text]&INPUT_TYPE=TEXT&LOCALE=[locale]&VOICE=[name]&OUTPUT_TYPE=AUDIO&AUDIO=WAVE_FILE（GET/POST）- 处理输入文本并返回一个wav文件。INPUT_TYPE、OUTPUT_TYPE和AUDIO支持其他值，但在兼容工具中通常是固定的。


- If your Coqui-TTS server is running on localhost using port 59125 (for classic Mary-TTS compatibility) you can us the following CURL requests to test the API:
- 如果您的Coqui-TTS服务器在localhost上运行，使用port59125（为了与经典的Mary-TTS兼容），您可以使用以下CURL请求来测试该API：

- Return locale of active voice, e.g. “en”:
- 返回活动语音的区域设置，例如“en”：

```
curl http://localhost:59125/locales
```
Return name of active voice, e.g. “glow-tts en u”

返回活动语音的名称，例如“glow-tts en u”
```
curl http://localhost:59125/voices
```
Create a wav-file with spoken input text:

创建一个包含语音输入文本的wav文件：
```
curl http://localhost:59125/process?INPUT_TEXT=this+is+a+test > test.wav
```
You can enter the same URLs in your browser and check-out the results there as well.

你也可以在浏览器中输入相同的URL，在那里查看结果。

# How it works and limitations 工作原理和局限性
A classic Mary-TTS server would usually show all installed locales and voices via the corresponding endpoints and accept the parameters LOCALE and VOICE for processing. For Coqui-TTS we usually start the server with one specific locale and model and thus cannot return all available options. Instead we return the active locale and use the model name as “voice”. Since we only have one active model and always want to return a WAV-file, we currently ignore all other processing parameters except INPUT_TEXT. Since the gender is not defined for models in Coqui-TTS we always return u (undefined). We think that this is an acceptable compromise, since users are often only interested in one specific voice anyways, but the API might get extended in the future to support multiple languages and voices at the same time.

一个经典的Mary-TTS服务器通常会通过相应的端点显示所有已安装的语言环境和语音，并接受LOCALE和VOICE参数进行处理。对于Coqui-TTS，我们通常启动服务器时会指定一个特定的语言环境和模型，因此无法返回所有可用选项。相反，我们会返回当前激活的语言环境，并将模型名称用作“语音”。由于我们只有一个激活的模型，并且始终希望返回WAV文件，因此目前我们会忽略除INPUT_TEXT之外的所有其他处理参数。由于Coqui-TTS中的模型没有定义性别，我们总是返回u（未定义）。我们认为这是一个可接受的折中方案，因为用户通常只对一个特定的语音感兴趣，但未来该API可能会扩展，以同时支持多种语言和语音。


